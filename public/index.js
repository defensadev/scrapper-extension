(()=>{var o=e=>{let t=document.getElementById(e);if(!t)throw new Error(`expected element with id: "${e}"`);return t};var a=class extends HTMLElement{constructor(){super();this.odysseyHTML="",this.shadow=this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadow.innerHTML=this.odysseyHTML;let r=this.shadow.querySelectorAll(".loadingmessagediv");for(let n=0;n<r.length;n++)r[n].remove()}},m=a;var p=()=>new URLSearchParams(window.location.search),h=e=>{let t=o("county");if(t.value)return t.value.toLowerCase();if(/^[0-9]+$/.test(e))return"harris";if(/^JP[0-9]+-[0-9]+-E.+$/.test(e))return"tarrant";throw new Error(`Could not recognize county for case number ${e}`)},c=async()=>{let e=o("case-number").value;if(!e)return;let t=o("root");t.innerHTML="";let r=document.createElement("div");r.className="m-4 font-extrabold text-gray-700",r.innerText="Loading...",t.appendChild(r);try{let s=`https://ihaucbf8v2.execute-api.us-east-1.amazonaws.com/${h(e)}?caseNumber=${e}`,d=(await fetch(s).then(async l=>{let u=await l.text();if(l.status!==200)throw new Error(u);return u})).replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""),i=document.createElement("odyssey-html");i.odysseyHTML=d,t.innerHTML="",t.appendChild(i)}catch(n){let s=document.createElement("p");s.className="text-red-500",s.innerText=n.message,t.innerHTML="",t.appendChild(s)}},y=()=>{customElements.define("odyssey-html",m);let e=o("case-number");e.onkeydown=n=>{n.key==="Enter"&&c()};let t=o("county");t.onkeydown=n=>{n.key==="Enter"&&e.value.length>0&&c()};let r=p().get("caseNumber");!r||(e.value=r,c())};y();})();
