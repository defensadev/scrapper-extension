(()=>{var s=n=>{let e=document.getElementById(n);if(!e)throw new Error(`expected element with id: "${n}"`);return e};var i=class extends HTMLElement{constructor(){super();this.odysseyHTML="",this.shadow=this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadow.innerHTML=this.odysseyHTML;let r=this.shadow.querySelectorAll(".loadingmessagediv");for(let o=0;o<r.length;o++)r[o].remove()}},h=i;var l={harris:/^[0-9]+$/,tarrant:/^JP[0-9]+-[0-9]+-E.+$/,fortbend:/^[0-9]+-JEV[0-9]+-[0-9]+$/},t={},c={},b=async()=>document.readyState==="complete"||document.readyState==="interactive"?null:new Promise(n=>document.addEventListener("readystatechange",function e(){(document.readyState==="complete"||document.readyState==="interactive")&&(document.removeEventListener("readystatechange",e),n(null))}));var g=()=>{let n=new URLSearchParams(window.location.search),e=n.get("caseNumber"),r=n.get("county");e&&(t.caseNumber=e),r&&(t.county=r)},w=()=>{if(t.caseNumber||t.county){let n=new URLSearchParams(t).toString();history.pushState({},"","?"+n)}},N=()=>{let n=s("case-number"),e=s("county");e.value&&(t.county=e.value.toLowerCase()),n.value&&(t.caseNumber=n.value)},v=()=>{let n=s("case-number"),e=s("county");e.value=t.county?t.county:e.value,n.value=t.caseNumber?t.caseNumber:n.value},x=n=>{for(let e in l)if(l[e].test(n))return e},T=()=>(g(),N(),t.county=t.county?t.county:t.caseNumber&&x(t.caseNumber),w(),v(),t.county&&t.caseNumber?c.caseNumber===t.caseNumber&&c.county===t.county?new Error("prevState"):(c.caseNumber=t.caseNumber,c.county=t.county,null):t.county?new Error("no case number provided couldn't preform autosearch"):new Error(`couldn't infer county from case number: "${t.caseNumber}"`)),a=T;var m=async n=>{let e=s("root");try{let{county:r,caseNumber:o}=t;if(!r||!o||n)throw n;let u=document.createElement("div");u.className="m-4 font-extrabold text-gray-700",u.innerText="Loading...",e.innerHTML="",e.appendChild(u);let f=`https://ihaucbf8v2.execute-api.us-east-1.amazonaws.com/${r}?caseNumber=${o}`,E=(await fetch(f).then(async p=>{let y=await p.text();if(p.status!==200)throw new Error(y);return y})).replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""),d=document.createElement("odyssey-html");d.odysseyHTML=E,e.innerHTML="",e.appendChild(d)}catch(r){if(r.message==="prevState")return;let o=document.createElement("p");o.className="text-red-500",o.innerText=r.message,e.innerHTML="",e.appendChild(o)}},L=()=>{customElements.define("odyssey-html",h);let n=s("case-number"),e=s("county");n.onblur=()=>m(a()),e.onblur=()=>m(a()),n.onkeydown=r=>{r.key==="Enter"&&n.blur()},e.onkeydown=r=>{r.key==="Enter"&&n.value.length>0&&e.blur()},m(a())};b().then(()=>L());})();
