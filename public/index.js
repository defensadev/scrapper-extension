(()=>{var s=n=>{let t=document.getElementById(n);if(!t)throw new Error(`expected element with id: "${n}"`);return t};var i=class extends HTMLElement{constructor(){super();this.odysseyHTML="",this.shadow=this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadow.innerHTML=this.odysseyHTML;let r=this.shadow.querySelectorAll(".loadingmessagediv");for(let o=0;o<r.length;o++)r[o].remove()}},b=i;var l={harris:/^[0-9]+$/,tarrant:/^JP[0-9]+-[0-9]+-E.+$/,fortbend:/^[0-9]+-JEV[0-9]+-[0-9]+$/},e={},c={},f=async()=>document.readyState==="complete"||document.readyState==="interactive"?null:new Promise(n=>document.addEventListener("readystatechange",function t(){(document.readyState==="complete"||document.readyState==="interactive")&&(document.removeEventListener("readystatechange",t),n(null))}));var g=()=>{let n=new URLSearchParams(window.location.search),t=n.get("caseNumber"),r=n.get("county");t&&(e.caseNumber=t),r&&(e.county=r)},N=()=>{if(e.caseNumber||e.county){e.caseNumber===void 0&&delete e.caseNumber,e.county===void 0&&delete e.county;let n=new URLSearchParams(e).toString();history.pushState({},"","?"+n)}},w=()=>{let n=s("case-number"),t=s("county");t.value&&(e.county=t.value.toLowerCase()),n.value&&(e.caseNumber=n.value)},v=()=>{let n=s("case-number"),t=s("county");t.value=e.county?e.county:t.value,n.value=e.caseNumber?e.caseNumber:n.value},x=n=>{for(let t in l)if(l[t].test(n))return t},T=()=>(g(),w(),e.county=e.county?e.county:e.caseNumber&&x(e.caseNumber),N(),v(),e.county&&e.caseNumber?c.caseNumber===e.caseNumber&&c.county===e.county?new Error("prevState"):(c.caseNumber=e.caseNumber,c.county=e.county,null):e.county?new Error("no case number provided couldn't preform autosearch"):new Error(`couldn't infer county from case number: "${e.caseNumber}"`)),a=T;var m=async n=>{let t=s("root");try{let{county:r,caseNumber:o}=e;if(!r||!o||n)throw n;let u=document.createElement("div");u.className="m-4 font-extrabold text-gray-700",u.innerText="Loading...",t.innerHTML="",t.appendChild(u);let h=`https://ihaucbf8v2.execute-api.us-east-1.amazonaws.com/${r}?caseNumber=${o}`,E=(await fetch(h).then(async p=>{let y=await p.text();if(p.status!==200)throw new Error(y);return y})).replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""),d=document.createElement("odyssey-html");d.odysseyHTML=E,t.innerHTML="",t.appendChild(d)}catch(r){if(r.message==="prevState")return;let o=document.createElement("p");o.className="text-red-500",o.innerText=r.message,t.innerHTML="",t.appendChild(o)}},L=()=>{customElements.define("odyssey-html",b);let n=s("case-number"),t=s("county");n.onblur=()=>m(a()),t.onblur=()=>m(a()),n.onkeydown=r=>{r.key==="Enter"&&n.blur()},t.onkeydown=r=>{r.key==="Enter"&&n.value.length>0&&t.blur()},m(a())};f().then(()=>L());})();
