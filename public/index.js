(()=>{var o=e=>{let t=document.getElementById(e);if(!t)throw new Error(`expected element with id: "${e}"`);return t};var c=class extends HTMLElement{constructor(){super();this.odysseyHTML="",this.shadow=this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadow.innerHTML=this.odysseyHTML;let r=this.shadow.querySelectorAll(".loadingmessagediv");for(let n=0;n<r.length;n++)r[n].remove()}},m=c;var d={harris:/^[0-9]+$/,tarrant:/^JP[0-9]+-[0-9]+-E.+$/,fortbend:/^[0-9]+-JEV[0-9]+-[0-9]+$/},y=e=>{let t=o("county");if(t.value)return t.value.toLowerCase();for(let r in d)if(d[r].test(e))return r;throw new Error(`Could not recognize county for case number ${e}`)},s={caseNumber:"",county:""},a=async()=>{let e=o("case-number").value;if(!e)return;let t=o("root");try{let r=y(e);if(r===s.county&&e===s.caseNumber)return;s.caseNumber=e,s.county=r,history.pushState({},"",`?caseNumber=${e}&county=${r}`);let n=document.createElement("div");n.className="m-4 font-extrabold text-gray-700",n.innerText="Loading...",t.innerHTML="",t.appendChild(n);let p=`https://ihaucbf8v2.execute-api.us-east-1.amazonaws.com/${r}?caseNumber=${e}`,h=(await fetch(p).then(async u=>{let l=await u.text();if(u.status!==200)throw new Error(l);return l})).replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""),i=document.createElement("odyssey-html");i.odysseyHTML=h,t.innerHTML="",t.appendChild(i)}catch(r){let n=document.createElement("p");n.className="text-red-500",n.innerText=r.message,t.innerHTML="",t.appendChild(n)}},b=()=>{customElements.define("odyssey-html",m);let e=o("case-number");e.onblur=()=>a(),e.onkeydown=n=>{n.key==="Enter"&&e.blur()};let t=o("county");t.onblur=()=>a(),t.onkeydown=n=>{n.key==="Enter"&&e.value.length>0&&t.blur()};let r=new URLSearchParams(window.location.search).get("caseNumber");!r||(e.value=r,a())};b();})();
